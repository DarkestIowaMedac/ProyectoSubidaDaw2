import{r as a,j as t,L as j}from"./app-BtW5Zps0.js";import{A as y}from"./AuthenticatedLayout-C34tojk3.js";import T from"./MuestraDetalles-DgzAplZU.js";import{F as q}from"./FormLayout-C8UV--RJ.js";import"./Dropdown-OKAWIvLe.js";function E(){const[l,c]=a.useState([]),[o,d]=a.useState(null),[n,m]=a.useState(0),[h,i]=a.useState(window.location.pathname),u=async()=>{try{const e=await fetch("/ProyectoSubidaDaw2/public/muestras");if(!e.ok)throw new Error("Network response was not ok");const r=await e.json();c(r),console.log(r)}catch(e){console.error("Error fetching muestras:",e),alert("Error al cargar las muestras. Por favor, intenta de nuevo más tarde.")}};a.useEffect(()=>{u()},[n]),a.useEffect(()=>{const e=()=>{i(window.location.pathname)};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[]);const x=async e=>{try{const r=document.querySelector('meta[name="csrf-token"]').getAttribute("content");(await fetch(`/ProyectoSubidaDaw2/public/borrarmuestra/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r}})).ok?console.log(`Muestra con ID ${e} eliminada exitosamente.`):alert(`Error al eliminar la muestra con ID ${e}.`)}catch(r){console.error("Error:",r),alert("Error al intentar eliminar la muestra.")}m(n+1)},p=e=>{window.confirm(`¿Estás seguro de que deseas eliminar la muestra con ID ${e}?`)&&x(e)},w=async e=>{try{const r=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),s=await fetch(`/ProyectoSubidaDaw2/public/muestra/${e}`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r}});if(s.ok){const v=await s.json();d(v),window.history.pushState({},"","/ProyectoSubidaDaw2/public/dashboard")}else alert(`Error al visualizar la muestra con ID ${e}.`)}catch(r){console.error("Error:",r),alert("Error al visualizar la muestra.")}},g=e=>{const r=JSON.stringify(e);document.cookie=`muestra=${r}; path=/; max-age=60`},f=e=>{g(e),window.history.pushState({},"","/ProyectoSubidaDaw2/public/dashboard"),i("/ProyectoSubidaDaw2/public/formulario")},b=()=>{switch(h){case"/ProyectoSubidaDaw2/public/formulario":return t.jsx(q,{});default:return t.jsx("div",{className:"container mx-auto px-4",children:o?t.jsx(T,{muestra:o}):t.jsx("div",{className:`grid gap-6
                sm:grid-cols-1
                md:grid-cols-1
                lg:grid-cols-2`,children:l.map(e=>t.jsxs("div",{id:e.id,className:"p-5 bg-gray-800 rounded-lg shadow-lg border border-gray-700 h-full flex flex-col",children:[t.jsxs("h1",{className:"text-lg font-bold text-white mb-2",children:[e.id,". ",e.nombre]}),t.jsx("h2",{className:"text-gray-300 mb-4 text-sm sm:text-base flex-grow",children:e.descripcion}),t.jsxs("div",{className:"flex flex-wrap gap-4 mt-auto justify-center items-center",children:[t.jsxs("button",{className:"bg-gray-600 hover:bg-gray-500 text-white px-5 py-2 rounded-md transition flex items-center gap-2",onClick:()=>w(e.id),children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#e8eaed",children:t.jsx("path",{d:"M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q54-137 174-218.5T480-800q146 0 266 81.5T920-500q-54 137-174 218.5T480-200Zm0-300Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z"})}),"Ver"]}),t.jsxs("button",{className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-md transition flex items-center gap-2",onClick:()=>f(e),children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#e8eaed",children:t.jsx("path",{d:"M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"})}),"Editar"]}),t.jsx("button",{className:"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-md transition flex items-center",onClick:()=>p(e.id),children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#e8eaed",children:t.jsx("path",{d:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"})})})]})]},e.id))})})}};return t.jsx("div",{children:b()})}function Z(){return t.jsxs(y,{children:[t.jsx(j,{title:"Dashboard"}),t.jsx("div",{className:"py-12",children:t.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:t.jsx("div",{className:"overflow-hidden bg-gradient-to-r from-slate-950 via-blue-950 to-slate-950 shadow-sm sm:rounded-lg",children:t.jsxs("div",{className:"p-6 text-gray-400",children:[t.jsx("h1",{className:"text-3xl text-white mb-6",children:"Muestras Creadas"}),t.jsx("div",{className:"bg-gray-700 text-white p-4 mb-6 rounded-lg shadow-md",children:t.jsx("h2",{className:"text-xl font-semibold",children:"Total de Muestras Creadas:"})}),t.jsx("div",{children:t.jsx(E,{})})]})})})})]})}export{Z as default};
